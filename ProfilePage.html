<!DOCTYPE html>
<html lang="en">

<head>
  <title>ALA/Profile-Page</title>
  <link rel="stylesheet" type="text/css" href="CRUD-Styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body class="ProfilePage">
  <header class="prof-header">
    <div class="back">
      <a href="employee-dash.html"><i class="arrow left"></i></a> 
    </div>
    <div>
    <h1>Profile</h1>
    </div>
    
  
  </header>
  <section class="prof-info">
    <section class="profile-left">

      <div class="left-top">
        <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" alt="default profile picture">      
        <h2>ALA Profile</h2>

      </div>

      <hr>

      <div class="left-bottom">
        <h3>Employee Information:</h3>
        <p><strong>EmployeeID:</strong> <span id="profile-employee-id"></span></p>
        <p><strong>Status: </strong>Active</p>
        <p><strong>Department:</strong> Information Science</p>
        <p><strong>Email:</strong> <span id="profile-email"></span></p>

      </div>
    </section>

<script>

 document.addEventListener("DOMContentLoaded", function () {
    const activeUser = JSON.parse(localStorage.getItem("activeUser"));

    if (!activeUser) {
        // If user not logged in â†’ send back to login page
        window.location.href = "Login.html";
        return;
    }

    // Fill EmployeeID and Email
    document.getElementById("profile-employee-id").textContent = activeUser.userID;
    document.getElementById("profile-email").textContent = activeUser.email;
});

</script>





    <section class="profile-right">
      <div class="right-card">
        <div class="card-edit">
          <h3>Personal Information:</h3>
          
            
          
      </div>
        <p><strong>Name: </strong>Jane Doe</p>
        <p><strong>Date of Birth:</strong> 01/01/1990</p>
        <p><strong>Address:</strong> 123 Main St, City, State, ZIP</p>
        <p><strong>Phone:</strong> 555-6789</p>


      </div>
      <div class="right-card">
        <div class="card-edit">
          <h3>Emergency Contact:</h3>
          <div class="button-group">
            <button id="edit-btn">Edit</button>
            <button id="save-btn" class="hidden">Save</button>
            <button id="cancel-btn" class="hidden">Cancel</button>
          </div>
        </div>
        <div id="info-view">
          <p><strong>Name:</strong> <span id="name-text">John Doe</span></p>
          <p><strong>Relationship:</strong> <span id="rel-text">Spouse</span></p>
          <p><strong>Email:</strong> <span id="email-text">john@example.com</span></p>
          <p><strong>Phone:</strong> <span id="phone-text">555-1234</span></p> 
        </div>

        <div id="info-edit" class="hidden">
            <label>Name: <input type="text" id="name-input"></label><br><br>
            <label>Relationship: <input type="text" id="rel-input"></label><br><br>
            <label>Email: <input type="text" id="email-input"></label><br><br>
            <label>Phone: <input type="text" id="phone-input"></label><br><br>
        </div>
        
      </div>
      <div class="right-card">
        <h3>Payment Information:</h3>
        <p>insert template payment information</p>
      </div>
    </section>
  </section>




<script>
// ------------------------------
// ELEMENT REFERENCES
// ------------------------------
const view = document.getElementById("info-view");
const edit = document.getElementById("info-edit");

const nameText = document.getElementById("name-text");
const relText = document.getElementById("rel-text");
const emailText = document.getElementById("email-text");
const phoneText = document.getElementById("phone-text");

const nameInput = document.getElementById("name-input");
const relInput = document.getElementById("rel-input");
const emailInput = document.getElementById("email-input");
const phoneInput = document.getElementById("phone-input");

const editBtn = document.getElementById("edit-btn");
const saveBtn = document.getElementById("save-btn");
const cancelBtn = document.getElementById("cancel-btn");

// ------------------------------
// LOAD SAVED DATA ON PAGE LOAD
// ------------------------------
document.addEventListener("DOMContentLoaded", function () {
    const savedData = JSON.parse(localStorage.getItem("emergencyContact"));

    if (savedData) {
        nameText.textContent = savedData.name;
        relText.textContent = savedData.relationship;
        emailText.textContent = savedData.email;
        phoneText.textContent = savedData.phone;
    }
});

// ------------------------------
// EDIT MODE
// ------------------------------
editBtn.onclick = () => {
    // Load current values into input fields
    nameInput.value = nameText.textContent;
    relInput.value = relText.textContent;
    emailInput.value = emailText.textContent;
    phoneInput.value = phoneText.textContent;

    view.classList.add("hidden");
    edit.classList.remove("hidden");

    editBtn.classList.add("hidden");
    saveBtn.classList.remove("hidden");
    cancelBtn.classList.remove("hidden");
};

// ------------------------------
// SAVE CHANGES + LOCAL STORAGE
// ------------------------------
saveBtn.onclick = () => {
    // Update text fields
    nameText.textContent = nameInput.value;
    relText.textContent = relInput.value;
    emailText.textContent = emailInput.value;
    phoneText.textContent = phoneInput.value;

    // Save to localStorage
    const dataToSave = {
        name: nameInput.value,
        relationship: relInput.value,
        email: emailInput.value,
        phone: phoneInput.value
    };

    localStorage.setItem("emergencyContact", JSON.stringify(dataToSave));

    // Return to view mode
    view.classList.remove("hidden");
    edit.classList.add("hidden");

    saveBtn.classList.add("hidden");
    cancelBtn.classList.add("hidden");
    editBtn.classList.remove("hidden");
};

// ------------------------------
// CANCEL EDIT
// ------------------------------
cancelBtn.onclick = () => {
    view.classList.remove("hidden");
    edit.classList.add("hidden");

    saveBtn.classList.add("hidden");
    cancelBtn.classList.add("hidden");
    editBtn.classList.remove("hidden");
};
</script>



</body>

</html>